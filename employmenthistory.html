<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Employee Employment History</title>
<style>
body{font-family:Arial,sans-serif;background:linear-gradient(135deg,#2E86AB,#F6C667);color:#fff;margin:0;padding:20px;}
.wrap{max-width:1000px;margin:0 auto;}
h1{margin:10px 0 6px;text-align:center;}
.panel{background:rgba(255,255,255,.15);padding:16px;border-radius:12px;margin:12px 0;}
.controls{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-bottom:10px;}
input,button{border:none;border-radius:8px;padding:10px;font-size:16px;}
button{background:#27AE60;color:#fff;font-weight:bold;cursor:pointer;}
button:hover{background:#1e8449;}
table{width:100%;border-collapse:collapse;margin-top:12px;background:rgba(255,255,255,.10);}
th,td{padding:10px;border-bottom:1px solid rgba(255,255,255,.25);text-align:left;}
th{background:rgba(255,255,255,.12);}
a{color:#FFD700;text-decoration:underline;}
</style>
</head>
<body>

<div class="wrap">
<h1>Employee Employment History</h1>

<div class="panel">
  <div class="controls">
    <label for="searchName">Search Employee:</label>
    <input id="searchName" type="text" placeholder="Enter name...">
  </div>

  <table id="historyTable">
    <thead>
      <tr>
        <th>Employee</th>
        <th>Company</th>
        <th>Role</th>
        <th>Start Date</th>
        <th>End Date</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody id="historyBody">
      <!-- rows injected here -->
    </tbody>
  </table>

  <p style="margin-top:15px;text-align:center;">
    <a href="dashboard.html">⬅ Back to Dashboard</a>
  </p>
</div>
</div>

<script src="history-manager.js"></script>
<script>
function renderHistory() {
    const tbody = document.getElementById("historyBody");
    const searchQuery = document.getElementById("searchName").value.trim().toLowerCase();
    const data = getEmployeeHistoryData();
    tbody.innerHTML = "";

    let rowsAdded = 0;

    data.forEach(emp => {
        if(searchQuery && !emp.name.toLowerCase().includes(searchQuery)) return;
        emp.history.forEach(record => {
            const tr = document.createElement("tr");
            tr.innerHTML = `
                <td>${emp.name}</td>
                <td>${record.company}</td>
                <td>${record.role}</td>
                <td>${record.start}</td>
                <td>${record.end || 'Current'}</td>
                <td>
                  ${!record.end ? `<button onclick="terminate('${emp.name}','${record.company}')">Terminate</button>` : ''}
                </td>
            `;
            tbody.appendChild(tr);
            rowsAdded++;
        });
    });

    if(rowsAdded === 0){
        tbody.innerHTML = '<tr><td colspan="6">No matching employees found.</td></tr>';
    }
}

function terminate(name, company){
    if(confirm(`Are you sure you want to terminate ${name} from ${company}?`)){
        updateEmploymentEndDate(name, company, new Date().toISOString().split("T")[0]);
        renderHistory();
    }
}

document.getElementById("searchName").addEventListener("input", renderHistory);
window.addEventListener("load", renderHistory);
</script>

</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Employee Employment History</title>
<style>
body{font-family:Arial,sans-serif;background:linear-gradient(135deg,#2E86AB,#F6C667);color:#fff;margin:0;padding:20px;}
.wrap{max-width:1000px;margin:0 auto;}
h1{margin:10px 0 6px;text-align:center;}
.panel{background:rgba(255,255,255,.15);padding:16px;border-radius:12px;margin:12px 0;}
.controls{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-bottom:10px;}
input,button{border:none;border-radius:8px;padding:10px;font-size:16px;}
button{background:#27AE60;color:#fff;font-weight:bold;cursor:pointer;}
button:hover{background:#1e8449;}
table{width:100%;border-collapse:collapse;margin-top:12px;background:rgba(255,255,255,.10);}
th,td{padding:10px;border-bottom:1px solid rgba(255,255,255,.25);text-align:left;}
th{background:rgba(255,255,255,.12);}
a{color:#FFD700;text-decoration:underline;}
</style>
</head>
<body>

<div class="wrap">
<h1>Employee Employment History</h1>

<div class="panel">
  <div class="controls">
    <label for="searchName">Search Employee:</label>
    <input id="searchName" type="text" placeholder="Enter name...">
  </div>

  <table id="historyTable">
    <thead>
      <tr>
        <th>Employee</th>
        <th>Company</th>
        <th>Role</th>
        <th>Start Date</th>
        <th>End Date</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody id="historyBody">
      <!-- rows injected here -->
    </tbody>
  </table>

  <p style="margin-top:15px;text-align:center;">
    <a href="dashboard.html">⬅ Back to Dashboard</a>
  </p>
</div>
</div>

<script src="history-manager.js"></script>
<script>
function renderHistory() {
    const tbody = document.getElementById("historyBody");
    const searchQuery = document.getElementById("searchName").value.trim().toLowerCase();
    const data = getEmployeeHistoryData();
    tbody.innerHTML = "";

    let rowsAdded = 0;

    data.forEach(emp => {
        if(searchQuery && !emp.name.toLowerCase().includes(searchQuery)) return;
        emp.history.forEach(record => {
            const tr = document.createElement("tr");
            tr.innerHTML = `
                <td>${emp.name}</td>
                <td>${record.company}</td>
                <td>${record.role}</td>
                <td>${record.start}</td>
                <td>${record.end || 'Current'}</td>
                <td>
                  ${!record.end ? `<button onclick="terminate('${emp.name}','${record.company}')">Terminate</button>` : ''}
                </td>
            `;
            tbody.appendChild(tr);
            rowsAdded++;
        });
    });

    if(rowsAdded === 0){
        tbody.innerHTML = '<tr><td colspan="6">No matching employees found.</td></tr>';
    }
}

function terminate(name, company){
    if(confirm(`Are you sure you want to terminate ${name} from ${company}?`)){
        updateEmploymentEndDate(name, company, new Date().toISOString().split("T")[0]);
        renderHistory();
    }
}

document.getElementById("searchName").addEventListener("input", renderHistory);
window.addEventListener("load", renderHistory);
</script>

</body>
</html>
